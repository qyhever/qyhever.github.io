<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="js,">





  <link rel="alternate" href="/atom.xml" title="正在缓冲99%" type="application/atom+xml">






<meta name="description" content="前言众所周知， js 是一门弱类型或者说是动态语言。变量没有类型限制，可以随时赋予任意值。 虽然变量的数据类型是不确定的，但是各种运算符对数据类型是有要求的。如果运算符发现，运算值的类型与预期不符，就会自动转换类型。 14 + &apos;1&apos; // &apos;41&apos; 上述代码中，数值 4和字符串&amp;#39;1&amp;#39;相加，结果为&amp;#39;41&amp;#39;，在运算过程中，JavaScript 将数值4自动转换为了字符">
<meta name="keywords" content="js">
<meta property="og:type" content="article">
<meta property="og:title" content="浅析js中的类型转换">
<meta property="og:url" content="http://qyhever.top/2019/08/10/浅析js中的类型转换/index.html">
<meta property="og:site_name" content="正在缓冲99%">
<meta property="og:description" content="前言众所周知， js 是一门弱类型或者说是动态语言。变量没有类型限制，可以随时赋予任意值。 虽然变量的数据类型是不确定的，但是各种运算符对数据类型是有要求的。如果运算符发现，运算值的类型与预期不符，就会自动转换类型。 14 + &apos;1&apos; // &apos;41&apos; 上述代码中，数值 4和字符串&amp;#39;1&amp;#39;相加，结果为&amp;#39;41&amp;#39;，在运算过程中，JavaScript 将数值4自动转换为了字符">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-08-13T14:32:34.552Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="浅析js中的类型转换">
<meta name="twitter:description" content="前言众所周知， js 是一门弱类型或者说是动态语言。变量没有类型限制，可以随时赋予任意值。 虽然变量的数据类型是不确定的，但是各种运算符对数据类型是有要求的。如果运算符发现，运算值的类型与预期不符，就会自动转换类型。 14 + &apos;1&apos; // &apos;41&apos; 上述代码中，数值 4和字符串&amp;#39;1&amp;#39;相加，结果为&amp;#39;41&amp;#39;，在运算过程中，JavaScript 将数值4自动转换为了字符">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://qyhever.top/2019/08/10/浅析js中的类型转换/">





  <title>浅析js中的类型转换 | 正在缓冲99%</title>
  









  <!-- 
  <script type="text/javascript"
  color="0,0,255" opacity='0.7' zIndex="-2" count="99" src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
   -->
  <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":true,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <!-- <div class="headband"></div> -->
    <!-- <a href="https://github.com/qyhever"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a> -->
    <a href="https://github.com/qyhever" class="github-corner" aria-label="View source on Github"><svg width="92" height="92" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a>
    <style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">正在缓冲99%</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Qin Yonghao's Personal Website</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

<!--<div class="player">
	<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=86 src="//music.163.com/outchain/player?type=2&id=1304257&auto=0&height=66"></iframe>
</div>-->
 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://qyhever.top/2019/08/10/浅析js中的类型转换/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="getElementById">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/me.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="正在缓冲99%">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">浅析js中的类型转换</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-10T19:23:04+08:00">
                2019-08-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/js/" itemprop="url" rel="index">
                    <span itemprop="name">js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,792 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  18 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>众所周知， js 是一门<strong>弱类型</strong>或者说是<strong>动态语言</strong>。变量没有类型限制，可以随时赋予任意值。</p>
<p>虽然变量的数据类型是不确定的，但是各种运算符对数据类型是有要求的。如果运算符发现，运算值的类型与预期不符，就会自动转换类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span> + <span class="string">'1'</span> <span class="comment">// '41'</span></span><br></pre></td></tr></table></figure>
<p>上述代码中，数值 <code>4</code>和字符串<code>&#39;1&#39;</code>相加，结果为<code>&#39;41&#39;</code>，在运算过程中，JavaScript 将数值<code>4</code>自动转换为了字符串<code>&#39;4&#39;</code>，类似的转换在 JavaScript 中很常见，我们有必要了解下背后的转换原理。</p>
<h3 id="js数据类型"><a href="#js数据类型" class="headerlink" title="js数据类型"></a>js数据类型</h3><p>js 中的数据类型分两大类：</p>
<ul>
<li>简单数据类型（也称为基本数据类型）：Undefined、Null 、Boolean、Number 和 String</li>
<li>复杂数据类型：Object</li>
</ul>
<p>总共 6 种数据类型（ES6 新增了 Symobal 类型，本文不讨论），相较于其他的语言，js 中的数据类型好像不足以表示所有数据类型。但是，由于 js 的数据类型具有动态性，因此没有再定义其他数据类型的必要了。</p>
<p>在类型转换过程中简单数据类型又称为原始值（原始类型）</p>
<h3 id="强制转换"><a href="#强制转换" class="headerlink" title="强制转换"></a>强制转换</h3><p> JavaScript 内置三个转型函数，可以使用<code>Number()</code>、<code>String()</code>和<code>Boolean()</code>，手动将各种类型的值，分别转换成数字、字符串或者布尔值。</p>
<h4 id="Number"><a href="#Number" class="headerlink" title="Number()"></a>Number()</h4><p>其实把非数值转换为数值的函数除了<code>Number()</code>，<code>parseInt()</code>和<code>parseFloat()</code>也经常用到。转型函数<code>Number()</code>可以用于任何数据类型，而后面两个专门用于把字符串转换为数值。</p>
<h5 id="原始类型值"><a href="#原始类型值" class="headerlink" title="原始类型值"></a>原始类型值</h5><ul>
<li>布尔值，<code>true</code>和<code>false</code>分别被转换为<code>1</code>和<code>0</code></li>
<li>数字值，原样返回</li>
<li><code>null</code>值，返回<code>0</code></li>
<li><code>undefined</code>，返回<code>NaN</code></li>
<li>字符串<ul>
<li>如果是空字符串，返回<code>0</code></li>
<li>如果是字符串中只包含数字（包括前面带正负号的情况），则将其转换为十进制数值（例如<code>&quot;123&quot;</code>转换为<code>123</code>），前面的零会被忽略（例如<code>&quot;011&quot;</code>转换为<code>11</code>）</li>
<li>如果字符串中是有效的浮点数，如<code>&quot;1.2&quot;</code>，返回<code>1.2</code>（前面的零会被忽略，例如<code>&quot;01.2&quot;</code>转换为<code>1.2</code>）</li>
<li>如果是有效的十六进制格式，如<code>&quot;0xf&quot;</code>，则将其转换为相同大小的十进制整数值</li>
<li>其他格式的字符串，则返回 NaN</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">false</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="number">10</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">null</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>) <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">''</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'10'</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'010'</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'1.2'</span>) <span class="comment">// 1.2</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'01.2'</span>) <span class="comment">// 1.2</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'0xf'</span>) <span class="comment">// 15</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'hello'</span>) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<h5 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h5><p>对象类型的转换稍微有点复杂：</p>
<ol>
<li>调用对象自身的<code>valueOf()</code>方法，如果返回原始类型的值，则直接对该值使用<code>Number</code>函数，不再进行后续步骤。</li>
<li>如果<code>valueOf()</code>方法返回对象，则调用对象自身的<code>toString()</code>方法。如果<code>toString()</code>方法返回原始类型的值，则直接对该值使用<code>Number()</code>函数，不再进行后续步骤。</li>
<li>如果<code>toString()</code>方法返回的是对象，则报错</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">Number</span>(obj) <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于下面步骤</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> obj.valueOf() === <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="built_in">Number</span>(obj.toString())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">Number</span>(obj.valueOf())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，首先调用<code>valueOf()</code>，结果返回对象本身；继续调用<code>toString()</code>，返回字符串<code>[object Object]</code>，对此字符串调用<code>Number()</code>，返回<code>NaN</code>。</p>
<p>大多数情况下，对象的<code>valueOf()</code>方法返回对象自身，所以一般会调用<code>toString()</code>方法，而<code>toString()</code>方法一般返回对象的类型字符串（例如<code>[object Object]</code>），所以<code>Number()</code>的参数是对象时，一般返回<code>NaN</code>。</p>
<p>如果<code>toString()</code>方法返回的不是原始类型的值，就会报错，我们可以重写对象的<code>toString()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Number</span>(obj)</span><br><span class="line"><span class="comment">// TypeError: Cannot convert object to primitive value</span></span><br></pre></td></tr></table></figure>
<p>数组类型的情况有点不一样，对于空数组，转换为<code>0</code>；对于只有一个成员（且该成员为能够被<code>Number()</code>转换的值即转换结果不为<code>NaN</code>）的数组，转换为该成员的值；其他情况下的数组，转换为<code>NaN</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>([]) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>([<span class="number">10</span>]) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">Number</span>([<span class="literal">null</span>]) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>([[<span class="number">10</span>]]) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<p>数组类型和一般对象的转换结果不一样，主要是因为数组的<code>toString()</code>方法内部重写了，直接调用不会返回<code>[object Array]</code>，而是返回每个成员（会先转换成字符串）拼接成的字符串，中间以逗号分隔。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">10</span>].toString() <span class="comment">// '10'</span></span><br><span class="line">[<span class="literal">null</span>].toString() <span class="comment">// ''</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">10</span>].toString() <span class="comment">// '1,10'</span></span><br></pre></td></tr></table></figure>
<h5 id="parseInt"><a href="#parseInt" class="headerlink" title="parseInt()"></a>parseInt()</h5><p>因为<code>Number()</code>函数在转换字符串时比较复杂而且不太适用，因此在处理字符串转换为整数的时候更常用的是<code>parseInt()</code>函数。<code>parseInt()</code>函数在转换字符串时，更多的是看起其是否符合数值模式。它会忽略字符串前面的空格，直至找到第一个非空格字符。</p>
<ul>
<li>如果第一个字符不是数字字符或者负号，<code>parseInt()</code>就会返回<code>NaN</code>；因此，用<code>parseInt()</code>转换空字符串会返回<code>NaN</code>（<code>Number()</code>对空字符串返回<code>0</code>）。</li>
<li>如果第一个字符是数字字符，<code>parseInt()</code>会继续解析第二个字符，直到解析完所有后续字符或者遇到了一个非数字字符。例如，<code>&#39;123abc&#39;</code>会被转换为<code>1234</code>，因为<code>&#39;abc&#39;</code>会被完全忽略；<code>&#39;22.5&#39;</code>会被转换为<code>22</code>，因为小数点不是有效的数字字符。</li>
<li>如果字符串中的第一个字符是数字字符，<code>parseInt()</code>也能够识别出各种整数格式（十进制、八进制、十六进制）。如果字符串以<code>&#39;0x&#39;</code>开头且后面是数字字符，就会当成一个十六进制整数；如果字符串以<code>0</code>开头且后面是数字字符，则会将其当做八进制整数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">'123abc'</span>) <span class="comment">// 123</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">''</span>) <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'a12'</span>) <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'0xa'</span>) <span class="comment">// 10(十六进制数)</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'12.5'</span>) <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'070'</span>) <span class="comment">// 56(八进制数)</span></span><br></pre></td></tr></table></figure>
<p>上述代码中<code>parseInt(&#39;070&#39;)</code>在浏览器中测试会返回<code>10</code>，前面的零会被忽略掉。其实<code>parseInt()</code>可以传入第二个参数，转换的基数（想要以什么进制来转换）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">'0xaf'</span>) <span class="comment">// 175</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'af'</span>) <span class="comment">// NaN</span></span><br><span class="line"><span class="comment">// af 本来是有效的十六进制数值，如果指定第二个参数为16，使用十六进制来解析，那么可以省略前面的 0x</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'af'</span>, <span class="number">16</span>) <span class="comment">// 175</span></span><br></pre></td></tr></table></figure>
<p>如果不指定基数，<code>parseInt()</code>会自行确定如何解析输入的字符串，为了避免不必要的错误，应该总是传入第二个参数，明确指定基数。</p>
<blockquote>
<p>一般情况下，解析的都是十进制数值，应该始终将 10 作为第二个参数（在语法检查工具 ESLint中，也会提示指定第二个参数）</p>
</blockquote>
<h5 id="parseFloat"><a href="#parseFloat" class="headerlink" title="parseFloat()"></a>parseFloat()</h5><p>与<code>parseInt()</code>函数类似，<code>parseFloat()</code>也是从第一个字符开始解析每个字符，一直解析到最后一个字符。如果遇见一个无效的浮点数字字符，就会停止解析，输出结果。字符串中的第一个小数点是有效的，而第二个小数点就是无效的了，因此它后面的字符都会被忽略。例如，<code>&#39;12.34.5&#39;</code>会被转换为<code>12.34</code>。</p>
<p><code>parseFloat()</code>会忽略最前面的零，且它只能解析十进制值（没有第二个参数）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'123abc'</span>) <span class="comment">// 123</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'0xa'</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'12.3'</span>) <span class="comment">// 12.3</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'12.3.4'</span>) <span class="comment">// 12.3</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'012.3'</span>) <span class="comment">// 12.3</span></span><br></pre></td></tr></table></figure>
<h4 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean()"></a>Boolean()</h4><p><code>Boolean()</code>函数可以将任意类型的值转为布尔值。至于返回的这个值是<code>true</code>还是<code>false</code>，取决于要转换值的数据类型及其实际值。下表给出了各种数据类型及其对应的转换规则。</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>转换为true的值</th>
<th>转换为false的值</th>
</tr>
</thead>
<tbody>
<tr>
<td>Boolean</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td>String</td>
<td>任何非空字符串</td>
<td>“”（空字符串）</td>
</tr>
<tr>
<td>Number</td>
<td>任何非零数字值（包括无穷大）</td>
<td>0（包括-0和+0）和NaN</td>
</tr>
<tr>
<td>Object</td>
<td>任何对象</td>
<td>null</td>
</tr>
<tr>
<td>Undefined</td>
<td>-</td>
<td>undefined</td>
</tr>
</tbody>
</table>
<p>需要注意的是，所有空对象的转换结果都是<code>true</code>，而且布尔对象表示的<code>false</code>值（<code>new Boolean(false)</code>）的转换结果也是<code>true</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(&#123;&#125;) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>([]) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>)) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="String"><a href="#String" class="headerlink" title="String()"></a>String()</h3><p><code>String()</code>函数可以将任意类型的值转化成字符串，转换规则如下。</p>
<h5 id="原始类型值-1"><a href="#原始类型值-1" class="headerlink" title="原始类型值"></a>原始类型值</h5><ul>
<li>数值，转为相应的字符串</li>
<li>字符串，原样输出</li>
<li>布尔值，<code>true</code>转换为字符串<code>&#39;true&#39;</code>，<code>false</code>转换为字符串<code>&#39;false&#39;</code></li>
<li><code>undefined</code>，转为字符串<code>&#39;undefined&#39;</code></li>
<li><code>null</code>，转为字符串<code>&#39;null&#39;</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>(<span class="number">123</span>) <span class="comment">// '123'</span></span><br><span class="line"><span class="built_in">String</span>(<span class="string">'abc'</span>) <span class="comment">// 'abc'</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">true</span>) <span class="comment">// 'true'</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">undefined</span>) <span class="comment">// 'undefined'</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">null</span>) <span class="comment">// 'null'</span></span><br></pre></td></tr></table></figure>
<h5 id="对象-1"><a href="#对象-1" class="headerlink" title="对象"></a>对象</h5><p><code>String()</code>函数的参数如果是对象，返回一个类型字符串；如果是数组，返回该数组的字符串形式。</p>
<p><code>String()</code>函数背后的转换规则，与<code>Number()</code>函数基本相同，区别是互换了<code>valueOf()</code>方法和<code>toString()</code>方法的执行顺序。</p>
<ol>
<li>先调用对象自身的<code>toString()</code>方法。如果返回原始类型的值，则对该值使用<code>String()</code>函数，不再进行以下步骤。</li>
<li>如果<code>toString()</code>方法返回的是对象，再调用对象的<code>valueOf()</code>方法。如果<code>valueOf()</code>方法返回原始类型的值，则对该值使用<code>String()</code>函数，不再进行以下步骤。</li>
<li>如果<code>valueOf()</code>方法返回的是对象，就报错。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>(&#123;<span class="attr">name</span>: <span class="number">1</span>&#125;) <span class="comment">// '[object Object]'</span></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">String</span>(&#123;<span class="attr">name</span>: <span class="number">1</span>&#125;.toString())</span><br><span class="line"><span class="built_in">String</span>(<span class="string">'[object Object]'</span>)  <span class="comment">// '[object Object]'</span></span><br></pre></td></tr></table></figure>
<p>上面代码先调用对象的<code>toString()</code>方法，会返回字符串<code>&#39;[object Object]&#39;</code>，然后对该值使用<code>String()</code>函数，不会再调用<code>valueOf()</code>方法，输出<code>&#39;[object Object]&#39;</code>。</p>
<p>如果<code>toString()方</code>法和<code>valueOf()</code>方法，返回的都是对象，就会报错，可以重写对象的这两个方法来验证：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  valueOf: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">String</span>(obj)</span><br><span class="line"><span class="comment">// TypeError: Cannot convert object to primitive value</span></span><br></pre></td></tr></table></figure>
<h3 id="自动转换"><a href="#自动转换" class="headerlink" title="自动转换"></a>自动转换</h3><p>类型转换中一个难点就是自动转换（也称隐式转换），由于在一些操作符下其类型会自动转换，这使得 js 尤其灵活，但同时又难以理解。</p>
<p>JavaScript 会自动转换数据类型的情况主要有三种：</p>
<ul>
<li><p>不同类型的数据互相运算</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="string">'1'</span> <span class="comment">// true</span></span><br><span class="line"><span class="number">1</span> + <span class="string">'a'</span> <span class="comment">// '1a'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>条件控制语句的条件表达式为非布尔值类型</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">'a'</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 'success'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对非数值类型的值使用一元运算符（<code>+</code>和<code>-</code>）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+&#123;<span class="attr">a</span>: <span class="number">1</span>&#125; <span class="comment">// NaN</span></span><br><span class="line">-[<span class="number">1</span>] <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>自动转换的规则是这样的：预期什么类型的值，就调用该类型的转换函数。比如，某个位置预期为字符串，就调用<code>String()</code>函数进行转换。如果该位置即可以是字符串，也可能是数值，那么默认转为数值。</p>
<p>由于自动转换具有不确定性，而且不易排错，建议在预期为布尔值、数值、字符串的地方，全部使用<code>Boolean()</code>、<code>Number()</code>和<code>String()</code>函数进行显式转换。</p>
<h4 id="ToBoolean"><a href="#ToBoolean" class="headerlink" title="ToBoolean"></a>ToBoolean</h4><p>JavaScript 遇到预期为布尔值的地方（比如<code>if</code>语句的条件部分），就会将非布尔值自动转换为布尔值，自动调用<code>Boolean()</code>函数，其转换规则在上面已经说过。</p>
<p>这些转换规则对于条件类语句非常重要，在运行过程中，会自动执行相应的<code>Boolean</code>转换。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'abc'</span></span><br><span class="line"><span class="keyword">if</span> (str) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'success'</span>)</span><br><span class="line">&#125; <span class="comment">// 'success'</span></span><br><span class="line">str &amp;&amp; <span class="string">'def'</span> <span class="comment">// 'def'</span></span><br></pre></td></tr></table></figure>
<p>运行上面代码，就会输出字符串<code>success</code>，因为字符串<code>abc</code>被自动转换成了对应的<code>Boolean</code>值（true）。由于存在这种自动执行的<code>Boolean</code>转换，因此在条件类语句中知道是什么类型的变量非常重要。</p>
<p>常见的自动转换布尔值还有下面两种：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 三目运算符</span></span><br><span class="line">expression ? <span class="literal">true</span> : <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 双重取反</span></span><br><span class="line">!!expression</span><br></pre></td></tr></table></figure>
<p>上面两种写法，内部其实还是调用的<code>Boolean()</code>函数。</p>
<h4 id="ToString"><a href="#ToString" class="headerlink" title="ToString"></a>ToString</h4><p>JavaScript 遇到预期为字符串的地方，就会将非字符串值自动转为字符串。字符串的自动转换，主要在字符串的加法运算，当一个值为字符串，另一个值为非字符串时，非字符串会自动转换。</p>
<p>自动转换一般会调用非字符串的<code>toString()</code>方法转换为字符串（<code>null</code>和<code>undefined</code>没有<code>toString()</code>方法，调用<code>String()</code>方法转换为<code>&#39;null&#39;</code>和<code>&#39;undefined&#39;</code>），转换完成得到相应的字符串值，然后就是执行加法运算，即字符串的拼接操作了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'1'</span> + <span class="number">2</span> <span class="comment">// '12'</span></span><br><span class="line"><span class="string">'1'</span> + <span class="literal">true</span> <span class="comment">// '1true'</span></span><br><span class="line"><span class="string">'1'</span> + <span class="literal">false</span> <span class="comment">// '1false'</span></span><br><span class="line"><span class="string">'1'</span> + &#123;&#125; <span class="comment">// '1[object Object]'</span></span><br><span class="line"><span class="comment">// 数组的 toString 方法经过重写，返回每个成员以逗号分隔拼接成的字符串</span></span><br><span class="line"><span class="comment">// 下面一行等同于, '1' + '', 结果为 '1'</span></span><br><span class="line"><span class="string">'1'</span> + [] <span class="comment">// '1'</span></span><br><span class="line"><span class="string">'1'</span> + <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125; <span class="comment">// '1function ()&#123;&#125;'</span></span><br><span class="line"><span class="string">'1'</span> + <span class="literal">undefined</span> <span class="comment">// '1undefined'</span></span><br><span class="line"><span class="string">'1'</span> + <span class="literal">null</span> <span class="comment">// '1null'</span></span><br></pre></td></tr></table></figure>
<p>上面代码需要注意的是字符串与函数的加法运算，会先调用函数的<code>toString()</code>方法，它始终返回当前函数的代码（看起来就像源代码一般）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;).toString() <span class="comment">// 'function ()&#123;&#125;'</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>)</span>&#123; <span class="keyword">return</span> a + b &#125;).toString() <span class="comment">// 'function foo(a)&#123; return a + b &#125;'</span></span><br></pre></td></tr></table></figure>
<p>所以转换之后就是<code>&#39;1&#39;</code>和<code>&#39;function (){}&#39;</code>的拼接操作，结果为<code>&#39;1function (){}&#39;</code>。</p>
<h4 id="ToNumber"><a href="#ToNumber" class="headerlink" title="ToNumber"></a>ToNumber</h4><p>JavaScript 遇到预期为数值的地方，就会将非数值自动转换为数值，系统内部会自动调用<code>Number()</code>函数。</p>
<p>除了加法运算符（<code>+</code>）有可能（可能会是字符串拼接的情况）把自动转换，其他运算符都会把非数值自动转成数值。<code>Number()</code>函数的转换规则前面已经说过，下面看看几个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'3'</span> - <span class="string">'2'</span> <span class="comment">// 1</span></span><br><span class="line"><span class="string">'3'</span> * <span class="string">'2'</span> <span class="comment">// 6</span></span><br><span class="line"><span class="literal">true</span> - <span class="number">1</span>  <span class="comment">// 0</span></span><br><span class="line"><span class="literal">false</span> - <span class="number">1</span> <span class="comment">// -1</span></span><br><span class="line"><span class="string">'1'</span> - <span class="number">1</span>   <span class="comment">// 0</span></span><br><span class="line"><span class="string">'3'</span> * []    <span class="comment">// 0</span></span><br><span class="line"><span class="literal">false</span> / <span class="string">'3'</span> <span class="comment">// 0</span></span><br><span class="line"><span class="string">'a'</span> - <span class="number">1</span>   <span class="comment">// NaN</span></span><br><span class="line"><span class="literal">null</span> + <span class="number">1</span> <span class="comment">// 1</span></span><br><span class="line"><span class="literal">undefined</span> + <span class="number">1</span> <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<p>上面代码中需要注意的是，<code>null</code>会被转换为<code>0</code>，<code>undefined</code>会被转换为<code>NaN</code></p>
<blockquote>
<p>NaN，即非数值，是一个特殊的数值，用于表示一个将要返回数值而未返回数值的情况。关于这个值，需要注意两点，第一是任何涉及到与 NaN 的运算操作，都会返回 NaN；第二是 NaN 不等于自身（即 NaN === NaN 为 false），检测 NaN 需要使用专用的 isNaN 函数。</p>
</blockquote>
<h4 id="相等操作符"><a href="#相等操作符" class="headerlink" title="相等操作符"></a>相等操作符</h4><p><code>==</code>在比较时，如果被比较的两个值类型不同，那么系统会自动转换成相同类型再比较。</p>
<p><code>==</code>并不是严格的比较，只是比较两者的数值。</p>
<p>在比较不同的数据类型时，有下面几种情况：</p>
<ul>
<li><p>如果有一个操作数为布尔值，这在比较之前先将其转换为数值——<code>false</code>转换为<code>0</code>，<code>true</code>转换为<code>1</code>。</p>
</li>
<li><p>如果有一个操作数为字符串，另一个操作数为数值，在比较之前先将字符串转换为数值。</p>
</li>
<li><p>如果有一个操作数为对象，另一个操作数不是，则调用对象的<code>valueOf()</code>方法或<code>toString()</code>方法，用得到的基本类型值按照起那么的规则比较。</p>
</li>
<li><p>如果两个操作符都为对象，这比较它们是不是同一个对象，如果都指向同一个对象，则为<code>true</code>（比较引用）</p>
</li>
<li><p>只要有一个操作数为<code>NaN</code>，一律返回<code>false</code></p>
</li>
<li><p><code>null</code>和<code>undefined</code>比较，不会进行转换，直接返回<code>true</code></p>
<p>下面看看几个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span> == <span class="number">0</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">true</span> == <span class="number">1</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">true</span> == <span class="number">3</span> <span class="comment">// false</span></span><br><span class="line"><span class="string">'5'</span> == <span class="number">5</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">name</span>: <span class="string">'foo'</span>&#125;</span><br><span class="line">o == <span class="number">1</span> <span class="comment">// false</span></span><br><span class="line">o == <span class="string">'[object Object]'</span> <span class="comment">// true，前面的 o 对象转换为基础类型值 '[object Object]'</span></span><br><span class="line"><span class="literal">undefined</span> == <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="number">0</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">// true</span></span><br><span class="line"><span class="string">'NaN'</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br><span class="line"><span class="number">1</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>在开发时，在遇到不确定是字符串还是数值时，可能会使用<code>==</code>来比较，这样就可以不用手动强制转换了。但其实这是偷懒的表现，还是规规矩矩的先强制转换后再比较，这样代码看上去逻辑会更清晰（如果配置了语法检测工具<code>eslint</code>，它的建议就是一直使用<code>===</code>而不使用<code>==</code>，避免自动转换）</p>
<h3 id="toString-方法总结"><a href="#toString-方法总结" class="headerlink" title="toString()方法总结"></a>toString()方法总结</h3><p>前面提到了这么多转换规则，有很多都是调用的<code>toString()</code>之后才继续执行的，我们有必要总结下<code>toString()</code>的返回值。</p>
<p>下面是各种类型的返回情况：</p>
<ul>
<li>数值返回当前数值的字符串形式</li>
<li>字符串直接返回</li>
<li>布尔值返回当前值的字符串形式</li>
<li><code>null</code>和<code>undefined</code>没有<code>toString()</code>方法，一般使用<code>String()</code>，分别返回<code>&#39;null&#39;</code>和<code>&#39;undefined&#39;</code></li>
<li>对象返回当前对象的类型字符串（例如<code>&#39;[object Object]&#39;</code>，<code>&#39;[object Math]&#39;</code>)</li>
<li>函数返回当前函数代码，例如：<code>function foo(){}</code>返回<code>&#39;function foo(){}&#39;</code>（各浏览器返回可能有差异）</li>
<li>数组返回每个成员（会先转换成字符串）拼接成的字符串，中间以逗号分隔（可以理解为调用了<code>join()</code>方法），例如：<code>[1, 2, 3]</code>返回<code>&#39;1,2,3&#39;</code></li>
<li>日期对象返回当前时区的时间字符串表示，例如：<code>new Date(&#39;2018-10-01 12:12:12&#39;).toString()</code> 返回<code>&#39;Mon Oct 01 2018 12:12:12 GMT+0800 (中国标准时间)&#39;</code>。但其实在类型转换中<code>Date</code>类型一般是调用<code>valueOf()</code>，因为它的<code>valueOf()</code>方法返回当前时间的数字值表示（即时间戳），返回结果已经是基础类型值了，不会再调用<code>toString()</code>方法了。</li>
</ul>
<p>最后，看几个有意思的类型转换例子</p>
<ol>
<li><p>+new Date()</p>
<p>这个返回时间戳的方法相信大家都经常用到，这里<code>+</code>运算符的规则和<code>Number()</code>转型函数是相同的，对于对象首先会先调用它的<code>valueOf()</code>方法，<code>Date</code>类型的<code>valueOf()</code>方法返回当前时间的数字值表示（即时间戳），返回结果为数值，不会继续下一步调用<code>toSting()</code>方法，直接对当前返回值使用<code>Number()</code>还是返回时间戳</p>
</li>
<li><p>(!+[]+[]+![]).length = 9</p>
<p>xxx.length，粗略一看有<code>length</code>属性的就字符串和数组了，所以前面的结果肯定是这两个其中一种。这里是类型转换，不可能出现转换为数组的情况，那么只可能是字符串，下面我们分析一下。</p>
<p>首先拆开来看，就是<code>!+[]</code>、<code>[]</code>、<code>![]</code>的相加操作</p>
<p><code>!+[]</code>会进行如下转换</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[].toString() <span class="comment">// ''</span></span><br><span class="line">+<span class="string">''</span> <span class="comment">// 0</span></span><br><span class="line">!<span class="number">0</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>都转换完成后，就是<code>true</code>、<code>&#39;&#39;</code>、<code>false</code>的相加操作，结果为<code>&#39;truefalse&#39;</code>，最后结果就是<code>9</code></p>
</li>
<li><p>[] + {} 和 {} + []</p>
<p>先说 [] + {} 。一个数组加一个对象。</p>
<p><code>[]</code> 和 <code>{}</code> 的 <code>valueOf()</code>都返回对象自身，所以都会调用 <code>toString()</code>，最后的结果是字符串串接。<code>[].toString()</code> 返回空字符串，<code>({}).toString()</code> 返回<code>&#39;[object Object]&#39;</code>。最后的结果就是<code>&#39;[object Object]&#39;</code>。</p>
<p>然后说 {} + [] ，看上去应该和上面一样。但是 <code>{}</code> 除了表示一个对象之外，也可以表示一个空的<code>block</code>。</p>
<p>在 [] + {} 中，<code>[]</code> 被解析为数组，因此后续的 <code>+</code> 被解析为加法运算符，而 <code>{}</code> 就解析为对象。但在 <code>{} + []</code> 中，开头的<code>{}</code> 被解析为空的 <code>block</code>，随后的 <code>+</code> 被解析为正号运算符，最后的结果就是<code>0</code>。即实际上成了：</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125; <span class="comment">// empty block </span></span><br><span class="line">+[] <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<p>相信不少人在遇到类型转换尤其是自动转换的时候，都是靠猜的。现在看了这么多底层的转换规则，应该或多或少的对其都有了一定的了解了。</p>

      
    </div>
    
    
    

    

    

    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:17px;">------------- 本文结束<i class="fa fa-paw"></i>感谢您的阅读 -------------</div>
    
</div>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/js/" rel="tag">
              <i class="fa fa-tag"></i>
              js
            </a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/16/jenkins自动部署/" rel="next" title="jenkins自动部署">
                <i class="fa fa-chevron-left"></i> jenkins自动部署
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/me.png" alt="getElementById">
            
              <p class="site-author-name" itemprop="name">getElementById</p>
              <p class="site-description motion-element" itemprop="description">Standing on shoulders of giants.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com" target="_blank" title="GitHub">
                      GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im" target="_blank" title="掘金">
                      掘金</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://segmentfault.com" target="_blank" title="SegmentFault">
                      SegmentFault</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://cnodejs.org" target="_blank" title="cnode">
                      cnode</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/lifesinger/blog/issues?q=label:blog" title="玉伯" target="_blank">玉伯</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com" title="阮一峰" target="_blank">阮一峰</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.zhangxinxu.com" title="张鑫旭" target="_blank">张鑫旭</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://i5ting.com" title="i5ting" target="_blank">i5ting</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.alloyteam.com/nav/" title="web前端导航" target="_blank">web前端导航</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://taobaofed.org" title="Taobao FED" target="_blank">Taobao FED</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#js数据类型"><span class="nav-number">2.</span> <span class="nav-text">js数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#强制转换"><span class="nav-number">3.</span> <span class="nav-text">强制转换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Number"><span class="nav-number">3.1.</span> <span class="nav-text">Number()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原始类型值"><span class="nav-number">3.1.1.</span> <span class="nav-text">原始类型值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对象"><span class="nav-number">3.1.2.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#parseInt"><span class="nav-number">3.1.3.</span> <span class="nav-text">parseInt()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#parseFloat"><span class="nav-number">3.1.4.</span> <span class="nav-text">parseFloat()</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Boolean"><span class="nav-number">3.2.</span> <span class="nav-text">Boolean()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String"><span class="nav-number">4.</span> <span class="nav-text">String()</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原始类型值-1"><span class="nav-number">4.0.1.</span> <span class="nav-text">原始类型值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对象-1"><span class="nav-number">4.0.2.</span> <span class="nav-text">对象</span></a></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#自动转换"><span class="nav-number">5.</span> <span class="nav-text">自动转换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ToBoolean"><span class="nav-number">5.1.</span> <span class="nav-text">ToBoolean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ToString"><span class="nav-number">5.2.</span> <span class="nav-text">ToString</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ToNumber"><span class="nav-number">5.3.</span> <span class="nav-text">ToNumber</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#相等操作符"><span class="nav-number">5.4.</span> <span class="nav-text">相等操作符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toString-方法总结"><span class="nav-number">6.</span> <span class="nav-text">toString()方法总结</span></a></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">getElementById</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <!--
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">44.4k</span>-->
  <div class="theme-info">
    <div class="powered-by"></div>
    <span class="post-count">博客全站共 44.4k 字</span>
  </div>
  
</div>


  <!-- <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div> -->




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/global.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  <script src="https://cdn.bootcss.com/clipboard.js/2.0.1/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>
  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>
  
</body>
</html>
